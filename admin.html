<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - Youth Service Philippines</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f5f5; color: #333; }
    
    .header { background: linear-gradient(135deg, #fff 0%, #fff5f0 100%); border-bottom: 3px solid #ff8c42; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 10px rgba(0,0,0,0.1); padding: 1rem 0; }
    .nav-container { display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; max-width: 1400px; margin: 0 auto; }
    .logo { display: flex; align-items: center; gap: 0.8rem; }
    .logo-icon { width: 50px; height: 50px; border-radius: 50%; object-fit: contain; }
    .logo-text h2 { font-size: 1.3rem; margin: 0; font-weight: 700; }
    .logo-text p { color: #ff8c42; margin: 0; font-weight: 600; }
    .nav-links { display: flex; list-style: none; gap: 2rem; }
    .nav-links a { text-decoration: none; color: #333; font-weight: 500; }
    .sign-in-btn { background: #ff8c42; color: white; padding: 0.6rem 1rem; border-radius: 5px; display: flex; align-items: center; gap: 0.5rem; text-decoration: none; font-weight: 600; }

    .admin-header { max-width: 1400px; margin: 2rem auto; padding: 0 2rem; display: flex; justify-content: space-between; align-items: flex-start; }
    .admin-header h1 { font-size: 2.2rem; color: #333; font-weight: 700; margin-bottom: 0.25rem; }
    .admin-header .subtitle { color: #ff8c42; font-size: 0.95rem; }
    .back-btn { background: white; color: #333; border: 1px solid #e0e0e0; padding: 0.6rem 1.2rem; border-radius: 6px; text-decoration: none; font-weight: 600; font-size: 0.9rem; }
    .back-btn:hover { background: #f9f9f9; }

    .stats-grid { max-width: 1400px; margin: 2rem auto; padding: 0 2rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; }
    .stat-card { background: white; padding: 1.5rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border-left: 4px solid #ff8c42; }
    .stat-card .label { color: #666; font-size: 0.9rem; font-weight: 500; margin-bottom: 0.5rem; }
    .stat-card .value { font-size: 2.2rem; font-weight: 800; color: #333; }
    .stat-card .icon { float: right; font-size: 2rem; color: #ffd9c0; }

    /* Program card adjustments for admin */
    .program-card { background: white; border-radius: 10px; box-shadow: 0 6px 18px rgba(17,24,39,0.06); overflow: hidden; border: 1px solid #eef2f6; display:flex; flex-direction:column; }
    .program-card .program-img { width:100%; height:140px; object-fit:cover; background:#f6f7f9; display:block; }
    .program-card .program-body { padding:12px; display:flex; flex-direction:column; gap:8px; }
    .program-card input[type="text"], .program-card textarea { width:100%; border:1px solid #e6e9ee; padding:8px; border-radius:6px; font-size:0.95rem; }
    .program-card .controls { display:flex; gap:8px; align-items:center; }

    /* Toast notifications */
    .toast-container { position: fixed; right: 20px; bottom: 20px; z-index: 9999; display:flex; flex-direction:column; gap:8px; }
    .toast { min-width: 220px; max-width: 320px; padding: 10px 14px; border-radius: 8px; color: #fff; box-shadow: 0 6px 18px rgba(17,24,39,0.08); font-weight:600; font-size:0.95rem; opacity:0; transform:translateY(8px); transition:all 260ms ease; }
    .toast.show { opacity:1; transform:translateY(0); }
    .toast.success { background: linear-gradient(90deg,#16a34a,#34d399); }
    .toast.warn { background: linear-gradient(90deg,#f59e0b,#fb923c); }
    .toast.error { background: linear-gradient(90deg,#ef4444,#f97316); }

    .quick-actions { max-width: 1400px; margin: 2rem auto; padding: 2rem; background: linear-gradient(135deg, #ff6a00 0%, #ff8c42 100%); border-radius: 12px; }
    .quick-actions h3 { color: white; font-size: 1.3rem; margin-bottom: 1.25rem; }
    .action-buttons { display: flex; flex-wrap: wrap; gap: 1rem; }
    .action-btn { background: transparent; color: white; border: 2px solid rgba(255,255,255,0.3); padding: 0.7rem 1.3rem; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.95rem; transition: all 0.2s; display: flex; align-items: center; gap: 0.5rem; }
    .action-btn:hover { background: rgba(255,255,255,0.15); border-color: rgba(255,255,255,0.6); }

    .tabs-section { max-width: 1400px; margin: 2rem auto; padding: 0 2rem; }
    .tabs-nav { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; border-bottom: 1px solid #e0e0e0; }
    .tab-btn { background: transparent; border: none; padding: 1rem 1.5rem; cursor: pointer; font-weight: 600; color: #999; font-size: 0.95rem; position: relative; }
    .tab-btn.active { color: #333; }
    .tab-btn.active::after { content: ''; position: absolute; bottom: -1px; left: 0; right: 0; height: 3px; background: #ff8c42; }
    .tab-btn:hover { color: #333; }

    .tab-content { display: none; }
    .tab-content.active { display: block; }

    .stats-box { background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
    .stats-box-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }
    .stats-box h3 { font-size: 1.2rem; color: #333; font-weight: 700; display: flex; align-items: center; gap: 0.5rem; }
    .stats-box h3 i { color: #ff8c42; font-size: 1.3rem; }
    .edit-btn { background: white; color: #333; border: 1px solid #e0e0e0; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.9rem; }
    .edit-btn:hover { background: #f9f9f9; }

    .stats-items { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; }
    .stats-item { text-align: left; }
    .stats-item .label { color: #666; font-size: 0.9rem; margin-bottom: 0.5rem; font-weight: 500; }
    .stats-item .number { font-size: 2rem; font-weight: 800; color: #333; }

    @media (max-width: 1024px) {
      .stats-grid { grid-template-columns: repeat(2, 1fr); }
      .action-buttons { gap: 0.75rem; }
      .action-btn { padding: 0.6rem 1rem; font-size: 0.85rem; }
    }

    @media (max-width: 768px) {
      .admin-header { flex-direction: column; gap: 1rem; }
      .stats-grid { grid-template-columns: 1fr; }
      .tabs-nav { overflow-x: auto; }
      .action-buttons { gap: 0.5rem; }
      .action-btn { flex: 1 1 calc(50% - 0.25rem); }
    }
  </style>
</head>
<body>


<!-- ADMIN HEADER -->
<div class="admin-header">
  <div>
    <h1>Admin Dashboard</h1>
    <p class="subtitle">Manage YSP website content and settings</p>
  </div>
  <a href="index.html" class="back-btn">Back to Website</a>
</div>

<!-- STATS GRID removed: admin dashboard now manages stats via the Statistics tab -->

<!-- QUICK ACTIONS -->
<div class="quick-actions">
  <h3>Quick Actions</h3>
  <div class="action-buttons">
    <button class="action-btn"><i class="fas fa-plus"></i> Add Program</button>
    <button class="action-btn"><i class="fas fa-plus"></i> Add Chapter</button>
    <button class="action-btn"><i class="fas fa-plus"></i> Add Event</button>
    <button class="action-btn"><i class="fas fa-plus"></i> Add Member</button>
  </div>
</div>

<!-- TABS SECTION -->
<div class="tabs-section">
  <div class="tabs-nav">
    <button class="tab-btn active" data-tab="statistics">Statistics</button>
    <button class="tab-btn" data-tab="programs">Programs</button>
    <button class="tab-btn" data-tab="chapters">Chapters</button>
    <button class="tab-btn" data-tab="events">Events</button>
    <button class="tab-btn" data-tab="members">Members</button>
    <button class="tab-btn" data-tab="contact">Contact</button>
  </div>

  <!-- Statistics Tab -->
  <div class="tab-content active" id="statistics">
    <div class="stats-box">
      <div class="stats-box-header">
        <h3><i class="fas fa-chart-bar"></i> Website Statistics</h3>
        <button class="edit-btn"><i class="fas fa-edit"></i> Edit</button>
      </div>
      <div class="stats-items">
        <div class="stats-item">
          <div class="label">Projects Completed</div>
          <div class="number" data-stat="projects">150</div>
        </div>
        <div class="stats-item">
          <div class="label">Active Chapters</div>
          <div class="number" data-stat="chapters">12</div>
        </div>
        <div class="stats-item">
          <div class="label">Active Members</div>
          <div class="number" data-stat="members">500</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Programs Tab -->
  <div class="tab-content" id="programs">
    <div class="stats-box">
      <h3>Programs Management</h3>
      <p style="color: #666; margin-top: 1rem;">Manage programs below. Changes save to localStorage and update public pages in real time.</p>
      <div style="margin-top:1rem; display:flex; gap:0.5rem;">
        <button id="add-program-btn" class="action-btn" style="background:#fff; color:#333; border:1px solid #e0e0e0;">+ Add Program</button>
      </div>
      <div id="admin-programs-list" style="margin-top:1.25rem; display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:1rem;"></div>
    </div>
  </div>

  <!-- Chapters Tab -->
  <div class="tab-content" id="chapters">
    <div class="stats-box">
      <h3>Chapters Management</h3>
      <p style="color: #666; margin-top: 1rem;">Chapters management interface coming soon.</p>
    </div>
  </div>

  <!-- Events Tab -->
  <div class="tab-content" id="events">
    <div class="stats-box">
      <h3>Events Management</h3>
      <p style="color: #666; margin-top: 1rem;">Events management interface coming soon.</p>
    </div>
  </div>

  <!-- Members Tab -->
  <div class="tab-content" id="members">
    <div class="stats-box">
      <h3>Members Management</h3>
      <p style="color: #666; margin-top: 1rem;">Members management interface coming soon.</p>
    </div>
  </div>

  <!-- Contact Tab -->
  <div class="tab-content" id="contact">
    <div class="stats-box">
      <h3>Contact Information</h3>
      <p style="color: #666; margin-top: 1rem;">Contact management interface coming soon.</p>
    </div>
  </div>
</div>

<script>
  document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      const tabName = this.getAttribute('data-tab');
      
      // Hide all tabs
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // Remove active from all buttons
      document.querySelectorAll('.tab-btn').forEach(b => {
        b.classList.remove('active');
      });
      
      // Show selected tab and mark button as active
      document.getElementById(tabName).classList.add('active');
      this.classList.add('active');
    });
  });

  // Statistics editing and localStorage sync
  (function(){
    const storageKey = 'ysp_stats';

    function seedFromDOM(){
      const seed = {};
      document.querySelectorAll('.stats-item .number').forEach(el => {
        const key = el.getAttribute('data-stat');
        if(key) seed[key] = el.textContent.trim();
      });
      return seed;
    }

    function getStats(){
      const raw = localStorage.getItem(storageKey);
      if(raw) return JSON.parse(raw);
      const s = seedFromDOM();
      localStorage.setItem(storageKey, JSON.stringify(s));
      return s;
    }

    function applyStatsToAdmin(stats){
      document.querySelectorAll('.stats-item .number').forEach(el => {
        const key = el.getAttribute('data-stat');
        if(key && stats[key] != null) el.textContent = stats[key];
      });
    }

    const stats = getStats();
    applyStatsToAdmin(stats);

    const editBtn = document.querySelector('.edit-btn');
    editBtn.addEventListener('click', function(){
      const isEditing = this.dataset.mode === 'editing';
      if(!isEditing){
        // enter editing mode
        this.innerHTML = '<i class="fas fa-save"></i> Save';
        this.dataset.mode = 'editing';
        document.querySelectorAll('.stats-item .number').forEach(el => {
          const key = el.getAttribute('data-stat');
          const input = document.createElement('input');
          input.type = 'number';
          input.min = '0';
          input.value = el.textContent.trim();
          input.className = 'stats-input';
          input.style.width = '100%';
          input.style.fontSize = '1.6rem';
          input.style.fontWeight = '800';
          input.setAttribute('data-stat', key);
          el.replaceWith(input);
        });
      } else {
        // save
        const inputs = document.querySelectorAll('.stats-input');
        const newStats = getStats();
        inputs.forEach(inp => {
          const k = inp.getAttribute('data-stat');
          newStats[k] = inp.value;
          const div = document.createElement('div');
          div.className = 'number';
          div.setAttribute('data-stat', k);
          div.textContent = inp.value;
          inp.replaceWith(div);
        });
        localStorage.setItem(storageKey, JSON.stringify(newStats));
        this.innerHTML = '<i class="fas fa-edit"></i> Edit';
        this.dataset.mode = '';
      }
    });

    // update admin UI when changes happen in other tabs
    window.addEventListener('storage', function(e){
      if(e.key === storageKey && e.newValue){
        applyStatsToAdmin(JSON.parse(e.newValue));
      }
    });
  })();

  // Programs admin editor: load programs, render editable cards, save to localStorage
  (function(){
    const storageKey = 'ysp_programs';
    const defaultPrograms = [
      { id: 'p1', title: 'Education for All', image: 'education.png', desc: 'Providing quality education and learning opportunities to underserved communities across the Philippines.' },
      { id: 'p2', title: 'Environmental Sustainability', image: 'environmental.png', desc: 'Leading environmental initiatives including clean-up drives, tree planting, and sustainability awareness campaigns.' },
      { id: 'p3', title: 'Health & Wellness', image: 'health.png', desc: 'Promoting health awareness, organizing medical missions, and supporting community health initiatives.' },
      { id: 'p4', title: 'Community Development', image: 'community.png', desc: 'Building stronger communities through infrastructure projects, livelihood programs, and social development initiatives.' },
      { id: 'p5', title: 'Youth Leadership', image: 'leadership.png', desc: 'Developing the next generation of leaders through training programs, workshops, and mentorship opportunities.' },
      { id: 'p6', title: 'Disaster Response', image: 'disaster.png', desc: 'Providing rapid response and relief operations during natural disasters and emergencies across the Philippines.' }
    ];

    function getPrograms(){
      const raw = localStorage.getItem(storageKey);
      if(raw) return JSON.parse(raw);
      localStorage.setItem(storageKey, JSON.stringify(defaultPrograms));
      return defaultPrograms.slice();
    }

    function savePrograms(list){
      localStorage.setItem(storageKey, JSON.stringify(list));
    }

    function el(tag, attrs = {}, children = []){
      const e = document.createElement(tag);
      Object.entries(attrs).forEach(([k,v])=>{ if(k === 'class') e.className = v; else if(k === 'html') e.innerHTML = v; else e.setAttribute(k,v); });
      (Array.isArray(children)?children:[children]).forEach(c=>{ if(!c) return; if(typeof c === 'string') e.appendChild(document.createTextNode(c)); else e.appendChild(c); });
      return e;
    }

    function renderAdmin(){
      const list = getPrograms();
      const container = document.getElementById('admin-programs-list');
      if(!container) return;
      container.innerHTML = '';
      list.forEach((p, idx) => {
        const card = el('div',{class:'program-card'});
        const img = el('img',{class:'program-img', src:p.image||'','alt':p.title});
        const body = el('div',{class:'program-body'});
        const titleIn = el('input',{type:'text',class:'program-title', value:p.title, placeholder:'Program title'});
        const descIn = el('textarea',{class:'program-desc'}, p.desc);
        const fileIn = el('input',{type:'file', accept:'image/*', class:'program-file'});
        const controls = el('div',{class:'controls'});
        const saveBtn = el('button',{class:'action-btn', style:'background:#ff8c42;color:#fff;border:none;'}, 'Save');
        const removeBtn = el('button',{class:'action-btn', style:'background:#fff;color:#333;border:1px solid #e0e0e0;'}, 'Delete');

        // preview selected image immediately
        fileIn.addEventListener('change', function(){
          const f = fileIn.files && fileIn.files[0];
          if(!f) return;
          const fr = new FileReader();
          fr.onload = function(ev){ img.src = ev.target.result; showToast('Image selected (preview shown)', 'success'); };
          fr.readAsDataURL(f);
        });

        saveBtn.addEventListener('click', function(){
          const updated = getPrograms();
          const entry = updated[idx];
          entry.title = titleIn.value;
          entry.desc = descIn.value;
          const file = fileIn.files && fileIn.files[0];
          if(file){
            const fr = new FileReader();
            saveBtn.disabled = true;
            fr.onload = function(ev){ entry.image = ev.target.result; savePrograms(updated); saveBtn.disabled = false; showToast('Program saved', 'success'); };
            fr.readAsDataURL(file);
          } else {
            savePrograms(updated);
            showToast('Program saved', 'success');
          }
          img.src = entry.image || img.src;
        });

        removeBtn.addEventListener('click', function(){
          if(!confirm('Delete this program?')) return;
          const updated = getPrograms();
          updated.splice(idx,1);
          savePrograms(updated);
          renderAdmin();
          showToast('Program deleted', 'warn');
        });

        controls.appendChild(fileIn);
        controls.appendChild(saveBtn);
        controls.appendChild(removeBtn);
        body.appendChild(titleIn);
        body.appendChild(descIn);
        body.appendChild(controls);
        card.appendChild(img);
        card.appendChild(body);
        container.appendChild(card);
      });
    }

    document.getElementById('add-program-btn').addEventListener('click', function(){
      const list = getPrograms();
      const id = 'p' + (Date.now());
      list.push({id:id, title:'New Program', image:'', desc:'Program description'});
      savePrograms(list);
      renderAdmin();
      showToast('Program added', 'success');
    });

    window.addEventListener('storage', function(e){ if(e.key === storageKey) renderAdmin(); });

    // initial render
    renderAdmin();
  })();

  // Toast helper
  function showToast(message, type = 'success', duration = 3000){
    let container = document.querySelector('.toast-container');
    if(!container){ container = document.createElement('div'); container.className = 'toast-container'; document.body.appendChild(container); }
    const t = document.createElement('div'); t.className = 'toast ' + (type || 'success'); t.textContent = message;
    container.appendChild(t);
    // trigger animation
    requestAnimationFrame(()=> t.classList.add('show'));
    setTimeout(()=>{ t.classList.remove('show'); setTimeout(()=> t.remove(),260); }, duration);
  }
</script>

</body>
</html>
